# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö —Ñ–∏–ª–∏–∞–ª–æ–≤

## üéØ –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Ö–∞–Ω–∏–∑–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –¥–≤—É—Ö —Ñ–∏–ª–∏–∞–ª–æ–≤ –∫–æ–º–ø–∞–Ω–∏–∏, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤ —Ä–∞–∑–Ω—ã—Ö –≥–æ—Ä–æ–¥–∞—Ö –†–æ—Å—Å–∏–∏. –ö–∞–∂–¥—ã–π —Ñ–∏–ª–∏–∞–ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –ò–° —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –ë–î.

**–û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –ø—Ä–æ—Ü–µ–¥—É—Ä —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ –≤—Å–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è–º –Ω–∞ –ø–æ–ª–Ω–æ—Ç—É, –Ω–µ–ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤–æ—Å—Ç—å, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

---

## üß™ –î–≤–∞ –ø–æ–¥—Ö–æ–¥–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### 1.¬†**Python-—Ç–µ—Å—Ç—ã**¬†(–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)

- –ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ pytest
    
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç SQLAlchemy –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
    
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
    
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
    

### 2.¬†**SQL-—Ç–µ—Å—Ç—ã**¬†(–ø—Ä—è–º—ã–µ –≤ –ë–î)

- –ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ pgAdmin –∏–ª–∏ DBeaver
    
- –ù–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ —á–∏—Å—Ç–æ–º SQL/PLpgSQL
    
- –ü–æ–∑–≤–æ–ª—è—é—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –Ω–∞–ø—Ä—è–º—É—é –≤ –ë–î
    
- –ò–¥–µ–∞–ª—å–Ω—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
    

---

## üìã –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### üîÑ 1. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

**–¶–µ–ª—å**: –ù–∞–Ω—è—Ç—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –≤ –§1 –ø–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–µ–Ω –∏ –≤ –§2

### üìù 2. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —É–≤–æ–ª—å–Ω–µ–Ω–∏—è

**–¶–µ–ª—å**: –£–≤–æ–ª–µ–Ω–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –≤ –§2 –ø–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —É–≤–æ–ª–µ–Ω –∏ –≤ –§1

### üîç 3. –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

**–¶–µ–ª—å**: –ü—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –≤ –¥–≤—É—Ö —Ñ–∏–ª–∏–∞–ª–∞—Ö —Å —Å–æ–≤–ø–∞–¥–∞—é—â–∏–º–∏ –§–ò–û, –¥–∞—Ç–æ–π —Ä–æ–∂–¥–µ–Ω–∏—è –∏ –Ω–æ–º–µ—Ä–æ–º –ø–∞—Å–ø–æ—Ä—Ç–∞ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚ö†Ô∏è 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

**–¶–µ–ª—å**: –ü—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ 2 –∏–∑ 3 –∫–ª—é—á–µ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ—Å—Ç—É–ø–∞–µ—Ç –≤ –ñ—É—Ä–Ω–∞–ª –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

### ‚úÖ 5. –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

**–¶–µ–ª—å**: –ü–æ—Å–ª–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–∏–Ω—è—Ç–æ–º—É —Ä–µ—à–µ–Ω–∏—é, –∑–∞–ø–∏—Å—å –∏–∑ –∂—É—Ä–Ω–∞–ª–∞ —É–¥–∞–ª—è–µ—Ç—Å—è

### üìä 6. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–¶–µ–ª—å**: –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–µ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞—Ä—É—à–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞¬†`Employee`

|–ü–æ–ª–µ|–¢–∏–ø|–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è|–û–ø–∏—Å–∞–Ω–∏–µ|
|---|---|---|---|
|EmplCode|Integer|Not NULL, PK|–¢–∞–±–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞|
|Name|Varchar(50)|Not NULL|–ò–º—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞|
|Surname|Varchar(50)|Not NULL|–§–∞–º–∏–ª–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞|
|Patronymic|Varchar(50)|Not NULL|–û—Ç—á–µ—Å—Ç–≤–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞|
|Birthday|Date|Not NULL|–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è|
|Passport|Varchar(10)|Not NULL|–ü–∞—Å–ø–æ—Ä—Ç|
|PosCode|Integer|Not NULL, FK|–î–æ–ª–∂–Ω–æ—Å—Ç—å|
|Filial|Integer|Not NULL|–ü—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å —Ñ–∏–ª–∏–∞–ª—É|
|Status|Varchar(20)|DEFAULT 'Active'|–°—Ç–∞—Ç—É—Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞|

### –¢–∞–±–ª–∏—Ü–∞¬†`Positions`

|–ü–æ–ª–µ|–¢–∏–ø|–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è|–û–ø–∏—Å–∞–Ω–∏–µ|
|---|---|---|---|
|PosCode|Integer|Not NULL, PK|–ö–æ–¥ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏|
|PosName|Varchar(100)|Not NULL|–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏|
|ParentPos|Integer|Nullable|–ü–æ–¥—á–∏–Ω–µ–Ω–Ω–æ—Å—Ç—å –¥–æ–ª–∂–Ω–æ—Å—Ç–∏|
|Filial|Integer|Not NULL|–ü—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å —Ñ–∏–ª–∏–∞–ª—É|

### –¢–∞–±–ª–∏—Ü–∞¬†`EmplHistory`

|–ü–æ–ª–µ|–¢–∏–ø|–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è|–û–ø–∏—Å–∞–Ω–∏–µ|
|---|---|---|---|
|EmplCode|Integer|Not NULL, FK|–¢–∞–±–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞|
|ChangeDate|Date|Not NULL|–î–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è|
|Surname|Varchar(50)|Not NULL|–§–∞–º–∏–ª–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞|
|Passport|Varchar(10)|Not NULL|–ü–∞—Å–ø–æ—Ä—Ç|
|PosCode|Integer|Not NULL, FK|–î–æ–ª–∂–Ω–æ—Å—Ç—å|

### –¢–∞–±–ª–∏—Ü–∞¬†`Conflist`

|–ü–æ–ª–µ|–¢–∏–ø|–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è|–û–ø–∏—Å–∞–Ω–∏–µ|
|---|---|---|---|
|EmplCode|Integer|Not NULL, FK|–¢–∞–±–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞|
|Errlist|Varchar(1000)|Not NULL|–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏|

---

## ‚ö° –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢: –ó–∞–ø—É—Å–∫ SQL-—Ç–µ—Å—Ç–æ–≤

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL

–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ —Ä–∞–∑–¥–µ–ª–µ "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL" –Ω–∏–∂–µ.

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î

–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL-—Å–∫—Ä–∏–ø—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ç–∞–±–ª–∏—Ü –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∏ —Ç–∞–±–ª–∏—Ü".

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ SQL-—Ç–µ—Å—Ç–æ–≤

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ pgAdmin

1. –û—Ç–∫—Ä–æ–π—Ç–µ pgAdmin 4
    
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –≤–∞—à–µ–π –ë–î PostgreSQL
    
3. –û—Ç–∫—Ä–æ–π—Ç–µ Query Tool
    
4. –í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞¬†`sql_tests.sql`
    
5. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤–µ—Å—å —Å–∫—Ä–∏–ø—Ç (F5)
    

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ DBeaver

1. –û—Ç–∫—Ä–æ–π—Ç–µ DBeaver
    
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ë–î
    
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π SQL-—Å–∫—Ä–∏–ø—Ç
    
4. –í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ —Ç–µ—Å—Ç–æ–≤
    
5. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç (Ctrl+Enter)
    

### –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

sql

-- –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ —Å—Ä–∞–∑—É
SELECT * FROM run_all_tests();

-- –ó–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
SELECT * FROM test_1_new_employee_sync();
SELECT * FROM test_2_employee_dismissal_sync();
SELECT * FROM test_3_duplicate_prevention();
SELECT * FROM test_4_partial_match_conflict();
SELECT * FROM test_5_conflict_resolution();
SELECT * FROM test_6_change_history_preservation();

-- –û—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
SELECT cleanup_test_data();

-- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è –ë–î
SELECT * FROM make_data_snapshot();

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ SQL-—Ç–µ—Å—Ç–æ–≤

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

#### `make_data_snapshot()`

- –°–æ–∑–¥–∞–µ—Ç —Å–Ω–∏–º–æ–∫ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ë–î
    
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü–µ
    

#### `emulate_synchronization()`

- –≠–º—É–ª–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É —Ñ–∏–ª–∏–∞–ª–∞–º–∏
    
- –ü–µ—Ä–µ–Ω–æ—Å–∏—Ç –Ω–æ–≤—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –º–µ–∂–¥—É –ë–î
    
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å—ã —É–≤–æ–ª–µ–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
    
- –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
    

#### `resolve_conflict(conflict_id, resolution_action)`

- –†–∞–∑—Ä–µ—à–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ç—Ä–µ–º—è —Å–ø–æ—Å–æ–±–∞–º–∏:
    
    - `MERGE`¬†- –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –∑–∞–ø–∏—Å–∏
        
    - `KEEP_BOTH`¬†- —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±–µ –∑–∞–ø–∏—Å–∏
        
    - `UPDATE_DATA`¬†- –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
        

#### `cleanup_test_data()`

- –û—á–∏—â–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (EmplCode >= 5000)
    

---

## üìä –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ SQL-—Ç–µ—Å—Ç–æ–≤

### üß™ –¢–ï–°–¢ 1:¬†`test_1_new_employee_sync()`

**–¶–µ–ª—å**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∏–∑ –§1 –≤ –§2

sql

–®–∞–≥–∏:
1. –î–æ–±–∞–≤–ª—è–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –≤ –§1 —Å –ø–∞—Å–ø–æ—Ä—Ç–æ–º '5001500150'
2. –ó–∞–ø—É—Å–∫–∞–µ–º emulate_synchronization()
3. –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –≤ –§2 –ø–æ –ø–∞—Å–ø–æ—Ä—Ç—É

**–ú–µ—Ö–∞–Ω–∏–∑–º**:

sql

INSERT INTO Employee (–§2)
SELECT ... FROM Employee 
WHERE Filial = 1 
AND Passport NOT IN (SELECT Passport FROM Employee WHERE Filial = 2)

### üß™ –¢–ï–°–¢ 2:¬†`test_2_employee_dismissal_sync()`

**–¶–µ–ª—å**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —É–≤–æ–ª—å–Ω–µ–Ω–∏—è

sql

–®–∞–≥–∏:
1. –°–æ–∑–¥–∞–µ–º –æ–¥–∏–Ω–∞–∫–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –≤ –æ–±–æ–∏—Ö —Ñ–∏–ª–∏–∞–ª–∞—Ö
2. –£–≤–æ–ª—å–Ω—è–µ–º –≤ –§2 (Status = 'Fired')
3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º
4. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –≤ –§1

**–ú–µ—Ö–∞–Ω–∏–∑–º**:

sql

UPDATE Employee e1
SET Status = 'Fired'
FROM Employee e2
WHERE e1.Passport = e2.Passport 
AND e1.Filial != e2.Filial 
AND e2.Status = 'Fired'

### üß™ –¢–ï–°–¢ 3:¬†`test_3_duplicate_prevention()`

**–¶–µ–ª—å**: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø—Ä–∏ –ø–æ–ª–Ω–æ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö

sql

–®–∞–≥–∏:
1. –°–æ–∑–¥–∞–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –§–ò–û, –¥–∞—Ç–æ–π —Ä–æ–∂–¥–µ–Ω–∏—è –∏ –ø–∞—Å–ø–æ—Ä—Ç–æ–º
2. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º
3. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –≤ Conflist

**–ö—Ä–∏—Ç–µ—Ä–∏–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞**: –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### üß™ –¢–ï–°–¢ 4:¬†`test_4_partial_match_conflict()`

**–¶–µ–ª—å**: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø—Ä–∏ —á–∞—Å—Ç–∏—á–Ω–æ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏

sql

–®–∞–≥–∏:
1. –°–æ–∑–¥–∞–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –§–ò–û –∏ –¥–∞—Ç–æ–π —Ä–æ–∂–¥–µ–Ω–∏—è
2. –ù–æ —Å –†–ê–ó–ù–´–ú–ò –ø–∞—Å–ø–æ—Ä—Ç–∞–º–∏
3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º
4. –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞

**–ö—Ä–∏—Ç–µ—Ä–∏–π**: –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ –§–ò–û + –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è

### üß™ –¢–ï–°–¢ 5:¬†`test_5_conflict_resolution()`

**–¶–µ–ª—å**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

sql

–®–∞–≥–∏:
1. –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç–Ω—É—é —Å–∏—Ç—É–∞—Ü–∏—é
2. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç
3. –†–∞–∑—Ä–µ—à–∞–µ–º —á–µ—Ä–µ–∑ resolve_conflict()
4. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–º–µ—Ç–∫—É Resolved = TRUE

**–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è**: MERGE, KEEP_BOTH, UPDATE_DATA

### üß™ –¢–ï–°–¢ 6:¬†`test_6_change_history_preservation()`

**–¶–µ–ª—å**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π

sql

–®–∞–≥–∏:
1. –°–æ–∑–¥–∞–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
2. –í–Ω–æ—Å–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–∞–Ω–Ω—ã–µ
3. –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ EmplHistory
4. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º
5. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏

---

## üöÄ –ó–∞–ø—É—Å–∫ Python-—Ç–µ—Å—Ç–æ–≤

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Python

bash

pip install -r requirements.txt

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª¬†`.env`¬†–≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

env

DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=your_password

### 3. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**

bash

### –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –æ—Ç —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
python cleanup_databases.py

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
python debug_database.py

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
python run_tests.py

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –∑–∞–ø—É—Å–∫–∞:**

bash

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ pytest —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π
pytest test_synchronization.py -v

### –ó–∞–ø—É—Å–∫ —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –æ—Ç—á–µ—Ç–∞
pytest test_synchronization.py --html=report.html

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
pytest test_synchronization.py::TestSynchronization::test_1_new_employee_sync -v

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL

### üì• –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç**:¬†[postgresql.org/download](https://www.postgresql.org/download/)
    
2. **–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à—É –û–°**¬†–∏ —Å–∫–∞—á–∞–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫
    

### ü™ü –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ Windows

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫**¬†–∏ –Ω–∞–∂–º–∏—Ç–µ "Next"
    
2. **–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
    
    text
    
    ‚òë PostgreSQL Server
    ‚òë pgAdmin 4 (–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
    ‚òë Command Line Tools
    
3. **–£–∫–∞–∂–∏—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —É—Å—Ç–∞–Ω–æ–≤–∫–∏**:¬†`C:\Program Files\PostgreSQL\16\`
    
4. **–ó–∞–¥–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è¬†`postgres`**¬†(–∑–∞–ø–æ–º–Ω–∏—Ç–µ –µ–≥–æ!)
    
5. **–û—Å—Ç–∞–≤—å—Ç–µ –ø–æ—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**:¬†`5432`
    
6. **–ó–∞–≤–µ—Ä—à–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É**
    

### üõ†Ô∏è –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∏ —Ç–∞–±–ª–∏—Ü

#### 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –°–£–ë–î —á–µ—Ä–µ–∑ DBeaver –∏–ª–∏ pgAdmin 4

#### 2. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

sql

-- –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–ª—è —Ñ–∏–ª–∏–∞–ª–∞ 1
CREATE DATABASE filial1
    OWNER = postgres
    ENCODING = 'UTF8'
    CONNECTION LIMIT = -1;

-- –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–ª—è —Ñ–∏–ª–∏–∞–ª–∞ 2  
CREATE DATABASE filial2
    OWNER = postgres
    ENCODING = 'UTF8'
    CONNECTION LIMIT = -1;

#### 3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –æ–±–µ–∏—Ö –±–∞–∑–∞—Ö —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

sql

-- –¢–∞–±–ª–∏—Ü–∞ –¥–æ–ª–∂–Ω–æ—Å—Ç–µ–π
CREATE TABLE Positions (
    PosCode INTEGER NOT NULL PRIMARY KEY,
    PosName VARCHAR(100) NOT NULL,
    ParentPos INTEGER NULL,
    Filial INTEGER NOT NULL
);

-- –¢–∞–±–ª–∏—Ü–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
CREATE TABLE Employee (
    EmplCode INTEGER NOT NULL PRIMARY KEY,
    Name VARCHAR(50) NOT NULL,
    Surname VARCHAR(50) NOT NULL,
    Patronymic VARCHAR(50) NOT NULL,
    Birthday DATE NOT NULL,
    Passport VARCHAR(10) NOT NULL,
    PosCode INTEGER NOT NULL,
    Filial INTEGER NOT NULL,
    Status VARCHAR(20) DEFAULT 'Active',
    FOREIGN KEY (PosCode) REFERENCES Positions(PosCode)
);

-- –¢–∞–±–ª–∏—Ü–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
CREATE TABLE EmplHistory (
    HistoryID SERIAL PRIMARY KEY,
    EmplCode INTEGER NOT NULL,
    ChangeDate DATE NOT NULL,
    Surname VARCHAR(50) NOT NULL,
    Passport VARCHAR(10) NOT NULL,
    PosCode INTEGER NOT NULL,
    Action VARCHAR(50) NOT NULL,
    FOREIGN KEY (EmplCode) REFERENCES Employee(EmplCode),
    FOREIGN KEY (PosCode) REFERENCES Positions(PosCode)
);

-- –¢–∞–±–ª–∏—Ü–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
CREATE TABLE Conflist (
    ConflictID SERIAL PRIMARY KEY,
    EmplCode INTEGER NOT NULL,
    Errlist VARCHAR(1000) NOT NULL,
    ConflictDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    Resolved BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (EmplCode) REFERENCES Employee(EmplCode)
);

#### 4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–≤ –æ–±–µ–∏—Ö –±–∞–∑–∞—Ö):

sql

-- –û–±—â–∏–µ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏
INSERT INTO Positions (PosCode, PosName, ParentPos, Filial) VALUES
(1, '–ú–µ–Ω–µ–¥–∂–µ—Ä', NULL, 1),
(2, '–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫', NULL, 1),
(3, '–ê–Ω–∞–ª–∏—Ç–∏–∫', NULL, 2),
(4, '–î–∏–∑–∞–π–Ω–µ—Ä', NULL, 2);

-- –ù–∞—á–∞–ª—å–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –¥–ª—è –§1
INSERT INTO Employee (EmplCode, Name, Surname, Patronymic, Birthday, Passport, PosCode, Filial) VALUES
(1001, '–ò–≤–∞–Ω', '–ò–≤–∞–Ω–æ–≤', '–ò–≤–∞–Ω–æ–≤–∏—á', '1990-01-01', '1234567890', 1, 1),
(1002, '–ü–µ—Ç—Ä', '–ü–µ—Ç—Ä–æ–≤', '–ü–µ—Ç—Ä–æ–≤–∏—á', '1991-02-02', '1111111111', 2, 1);

-- –ù–∞—á–∞–ª—å–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –¥–ª—è –§2  
INSERT INTO Employee (EmplCode, Name, Surname, Patronymic, Birthday, Passport, PosCode, Filial) VALUES
(2001, '–ú–∞—Ä–∏—è', '–°–∏–¥–æ—Ä–æ–≤–∞', '–ò–≤–∞–Ω–æ–≤–Ω–∞', '1992-03-03', '2222222222', 3, 2),
(2002, '–ê–Ω–Ω–∞', '–°–º–∏—Ä–Ω–æ–≤–∞', '–ü–µ—Ç—Ä–æ–≤–Ω–∞', '1993-04-04', '3333333333', 4, 2);

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

text

tests/
‚îú‚îÄ‚îÄ config.py              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
‚îú‚îÄ‚îÄ models.py              # SQLAlchemy –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ database.py            # –ú–µ–Ω–µ–¥–∂–µ—Ä —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ test_base.py           # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ test_synchronization.py # –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ run_tests.py           # –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ cleanup_databases.py   # –°–∫—Ä–∏–ø—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ –ë–î
‚îú‚îÄ‚îÄ debug_database.py      # –°–∫—Ä–∏–ø—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ë–î
‚îú‚îÄ‚îÄ sql_tests.sql          # SQL-–≤–µ—Ä—Å–∏—è —Ç–µ—Å—Ç–æ–≤ –¥–ª—è pgAdmin
‚îî‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### üõ°Ô∏è –ò–∑–æ–ª—è—Ü–∏—è —Ç–µ—Å—Ç–æ–≤

- –ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ —á–∏—Å—Ç–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
    
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (EmplCode >= 5000)
    
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ –∑–∞–ø—É—Å–∫–∞–º–∏
    

### üîÑ –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

sql

-- –ò–∑ –§1 ‚Üí –§2
INSERT INTO Employee (–§2) SELECT ... FROM Employee WHERE Filial = 1

-- –ò–∑ –§2 ‚Üí –§1  
INSERT INTO Employee (–§1) SELECT ... FROM Employee WHERE Filial = 2

### ‚ö†Ô∏è –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

- **–ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ**: –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–∞—Å–ø–æ—Ä—Ç–∞
    
- **–ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ**: –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –§–ò–û + –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è
    

### üßπ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞

sql

SELECT cleanup_test_data();  -- –û—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üîß –£—Ç–∏–ª–∏—Ç—ã

### SQL-—Ñ—É–Ω–∫—Ü–∏–∏:

- `make_data_snapshot()`¬†- –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ë–î
    
- `cleanup_test_data()`¬†- –æ—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    
- `emulate_synchronization()`¬†- —ç–º—É–ª—è—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
    

### Python-—Å–∫—Ä–∏–ø—Ç—ã:

- `cleanup_databases.py`¬†- –ø–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    
- `debug_database.py`¬†- –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
    

---

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### SQL-—Ç–µ—Å—Ç—ã:

- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –≤–∏–¥–µ —Ç–∞–±–ª–∏—Ü—ã
    
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞
    
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    

### Python-—Ç–µ—Å—Ç—ã:

- `test_results_YYYYMMDD_HHMMSS.log`¬†- –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏
    
- –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ —Å —Ü–≤–µ—Ç–æ–≤—ã–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ–º
    
- HTML-–æ—Ç—á–µ—Ç—ã –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ pytest-html
    

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ï—Å–ª–∏ SQL-—Ç–µ—Å—Ç—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ë–î
    
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –≤—Å–µ —Å–∫—Ä–∏–ø—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
    
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    

### –ï—Å–ª–∏ Python-—Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—É—é –æ—á–∏—Å—Ç–∫—É:¬†`python cleanup_databases.py`
    
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î:¬†`python debug_database.py`
    
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—É—â–µ–Ω—ã –∏ –¥–æ—Å—Ç—É–ø–Ω—ã
    

### –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤¬†`.env`¬†—Ñ–∞–π–ª–µ
    
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
    
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–∞—Ä–æ–ª—è
    

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤:

1. –î–ª—è SQL-—Ç–µ—Å—Ç–æ–≤ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –≤ pgAdmin
    
2. –î–ª—è Python-—Ç–µ—Å—Ç–æ–≤ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
    
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
    

---

## üîí –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ–∫—Ä—É–∂–µ–Ω–∏—é

- Python 3.8+
    
- PostgreSQL 12+
    
- –î–æ—Å—Ç—É–ø –∫ –¥–≤—É–º –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö:¬†`filial1`¬†–∏¬†`filial2`
    
- pgAdmin 4 –∏–ª–∏ DBeaver –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å SQL-—Ç–µ—Å—Ç–∞–º–∏
    

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –¥–≤—É–º—è –ø–æ–¥—Ö–æ–¥–∞–º–∏: –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º (Python) –∏ –ø—Ä—è–º—ã–º (SQL)!