**

В Компании работают два филиала в разных городах России. В каждом филиале для деятельности HR подразделения используются разные экземпляры одной и той же ИС (2 сервера).

Для обеспечения целостности процессов компании по ночам происходит синхронизация данных в разных БД. Job вносит изменения, которые вступили в силу после последней успешно выполненной синхронизации + обновляет журнал конфликтов. Необходимо проверить корректность работы процедур синхронизации по всем изменениям на полноту, непротиворечивость, отсутствие дублирования информации. Подразумевается, что тестирование будет проводиться только посредством БД, без использования GUI.

1. Нанятый сотрудник в Ф1 после синхронизации доступен и в Ф2.

2. Уволенный сотрудник в Ф2 после синхронизации уволен и в Ф1.

3. При одновременном оформлении сотрудников в двух филиалах, совпадающих по ФИО, дате рождения и номеру паспорта, после синхронизации не происходит дублирования сотрудника.

4. При конфликтной ситуации совпадении 2 из 3 ключевых параметров (см.3) синхронизация не производится, информация поступает в Журнал конфликтов.

5. После разрешения конфликта экспертами в разных филиалах и совпадении результатов, происходит синхронизация согласно принятому решению, запись из журнала конфликтов удаляется.

6. При изменении информации о сотруднике (должность, оклад и т.д.) после синхронизации не происходит нарушения истории изменений.

  
  
  
  
  
  
  
  
  
  
  
  

Employee

|   |   |   |   |   |
|---|---|---|---|---|
|EmplCode|Integer|NotNULL|PK|Табельный номер сотрудника|
|Name|Varchar(50)|NotNULL||Имя сотрудника|
|Surname|Varchar(50)|NotNULL||Фамилия сотрудника|
|Patronymic|Varchar(50)|NotNULL||Отчество сотрудника|
|Birthday|Date|NotNULL||Дата рождения|
|Passport|Varchar(10)|NotNULL||Паспорт|
|PosCode|Integer|NotNULL|FK|Должность|

  

Positions

|   |   |   |   |   |
|---|---|---|---|---|
|PosCode|Integer|NotNULL|PK|Код должности|
|PosName|Varchar(100)|NotNULL||Наименование должности|
|ParentPos|Integer|Nullable||Подчиненность должности|
|Filial|Integer|NotNULL||Принадлежность филиалу|

  

EmplHistory

|   |   |   |   |   |
|---|---|---|---|---|
|EmplCode|Integer|NotNULL|FK|Табельный номер сотрудника|
|ChangeDate|Date|NotNULL||Дата изменения|
|Surname|Varchar(50)|NotNULL||Фамилия сотрудника|
|Passport|Varchar(10)|NotNULL||Паспорт|
|PosCode|Integer|NotNULL|FK|Должность|

  

Conflist

|   |   |   |   |   |
|---|---|---|---|---|
|EmplCode|Integer|NotNULL|FK|Табельный номер сотрудника|
|Errlist|Varchar(1000)|NotNULL||Описание ошибки синхронизации|

  
**