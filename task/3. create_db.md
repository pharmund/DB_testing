
## Создание базы данных и таблиц

### 1. Подключиться к СУБД

Сначала нужно подключиться к вашей СУБД (MySQL, PostgreSQL, SQL Server и т.д.) через DBeaver или pgAdmin 4

### 2. Создать базы данных
 
CREATE DATABASE filial1
    OWNER = postgres
    ENCODING = 'UTF8'
    CONNECTION LIMIT = -1;



CREATE DATABASE filial2
    OWNER = postgres
    ENCODING = 'UTF8'
    CONNECTION LIMIT = -1;



### 3. Создать одинаковые структуры в обеих базах:

**В базах filial1 и filial2** 

sql

-- Таблица должностей
CREATE TABLE Positions (
    PosCode INTEGER NOT NULL PRIMARY KEY,
    PosName VARCHAR(100) NOT NULL,
    ParentPos INTEGER NULL,
    Filial INTEGER NOT NULL
);

-- Таблица сотрудников
CREATE TABLE Employee (
    EmplCode INTEGER NOT NULL PRIMARY KEY,
    Name VARCHAR(50) NOT NULL,
    Surname VARCHAR(50) NOT NULL,
    Patronymic VARCHAR(50) NOT NULL,
    Birthday DATE NOT NULL,
    Passport VARCHAR(10) NOT NULL,
    PosCode INTEGER NOT NULL,
    Filial INTEGER NOT NULL,
    Status VARCHAR(20) DEFAULT 'Active',
    FOREIGN KEY (PosCode) REFERENCES Positions(PosCode)
);

-- Таблица истории изменений
CREATE TABLE EmplHistory (
    HistoryID SERIAL PRIMARY KEY,
    EmplCode INTEGER NOT NULL,
    ChangeDate DATE NOT NULL,
    Surname VARCHAR(50) NOT NULL,
    Passport VARCHAR(10) NOT NULL,
    PosCode INTEGER NOT NULL,
    Action VARCHAR(50) NOT NULL,
    FOREIGN KEY (EmplCode) REFERENCES Employee(EmplCode),
    FOREIGN KEY (PosCode) REFERENCES Positions(PosCode)
);

-- Таблица конфликтов
CREATE TABLE Conflist (
    ConflictID SERIAL PRIMARY KEY,
    EmplCode INTEGER NOT NULL,
    Errlist VARCHAR(1000) NOT NULL,
    ConflictDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    Resolved BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (EmplCode) REFERENCES Employee(EmplCode)
);


## 4. Заполнить тестовыми данными

**В обеих базах выполните:**

sql

-- Общие должности
INSERT INTO Positions (PosCode, PosName, ParentPos, Filial) VALUES
(1, 'Менедджер', NULL, 1),
(2, 'Разработчик', NULL, 1),
(3, 'Аналитик', NULL, 2),
(4, 'Дизайнер', NULL, 2);

-- Начальные сотрудники для Ф1
INSERT INTO Employee (EmplCode, Name, Surname, Patronymic, Birthday, Passport, PosCode, Filial) VALUES
(1001, 'Иван', 'Иванов', 'Иванович', '1990-01-01', '1234567890', 1, 1),
(1002, 'Петр', 'Петров', 'Петрович', '1991-02-02', '1111111111', 2, 1);

-- Начальные сотрудники для Ф2  
INSERT INTO Employee (EmplCode, Name, Surname, Patronymic, Birthday, Passport, PosCode, Filial) VALUES
(2001, 'Мария', 'Сидорова', 'Ивановна', '1992-03-03', '2222222222', 3, 2),
(2002, 'Анна', 'Смирнова', 'Петровна', '1993-04-04', '3333333333', 4, 2);


