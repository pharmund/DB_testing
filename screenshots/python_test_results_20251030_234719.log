2025-10-30 23:47:19,903 - __main__ - INFO - ЗАПУСК ТЕСТОВ СИНХРОНИЗАЦИИ БАЗ ДАННЫХ
2025-10-30 23:47:21,214 - database - INFO - Успешное подключение к filial1
2025-10-30 23:47:21,293 - database - INFO - Успешное подключение к filial2
2025-10-30 23:47:21,296 - test_synchronization - INFO - === ТЕСТ 1: Синхронизация нового сотрудника ===
2025-10-30 23:47:21,308 - test_synchronization - INFO - Начальное состояние: Ф1=3, Ф2=9
2025-10-30 23:47:21,310 - test_synchronization - INFO - Используемый паспорт: 77241010
2025-10-30 23:47:21,322 - test_synchronization - INFO - Добавлен сотрудник 13242 в Ф1 с паспортом 77241010
2025-10-30 23:47:21,325 - test_synchronization - INFO - После добавления: Ф1=4, Ф2=9
2025-10-30 23:47:21,328 - test_synchronization - INFO - Перед синхронизацией: в Ф1=ДА, в Ф2=НЕТ
2025-10-30 23:47:21,337 - database - INFO - Сотрудник 77241010 синхронизирован из filial1 в filial2 с кодом 2010
2025-10-30 23:47:21,339 - test_synchronization - INFO - Синхронизация выполнена: True
2025-10-30 23:47:21,344 - test_synchronization - INFO - Конечное состояние: Ф1=4, Ф2=10
2025-10-30 23:47:21,345 - test_synchronization - INFO - После синхронизации: в Ф1=ДА, в Ф2=ДА
2025-10-30 23:47:21,346 - test_synchronization - INFO - ✅ УСПЕХ: ТЕСТ 1 ПРОЙДЕН: Сотрудник успешно синхронизирован
2025-10-30 23:47:21,354 - database - INFO - Тестовые данные очищены в filial1
2025-10-30 23:47:21,362 - database - INFO - Тестовые данные очищены в filial2
2025-10-30 23:47:21,524 - database - INFO - Успешное подключение к filial1
2025-10-30 23:47:21,586 - database - INFO - Успешное подключение к filial2
2025-10-30 23:47:21,588 - test_synchronization - INFO - === ТЕСТ 2: Синхронизация увольнения ===
2025-10-30 23:47:21,608 - test_synchronization - INFO - Создан сотрудник в обоих филиалах с паспортом 77241020
2025-10-30 23:47:21,611 - test_synchronization - INFO - Начальные статусы: Ф1=Active, Ф2=Active
2025-10-30 23:47:21,615 - test_synchronization - INFO - Сотрудник уволен в Ф2
2025-10-30 23:47:21,618 - test_synchronization - INFO - Статус в Ф2 после увольнения: Fired
2025-10-30 23:47:21,622 - database - INFO - Статус сотрудника 77241020 обновлен в filial1: Fired
2025-10-30 23:47:21,626 - database - INFO - Статус сотрудника 77241020 обновлен в filial2: Fired
2025-10-30 23:47:21,628 - test_synchronization - INFO - Синхронизация увольнения выполнена: (True, True)
2025-10-30 23:47:21,630 - test_synchronization - INFO - Статус сотрудника в Ф1 после синхронизации: Fired
2025-10-30 23:47:21,632 - test_synchronization - INFO - ✅ УСПЕХ: ТЕСТ 2 ПРОЙДЕН: Статус увольнения синхронизирован
2025-10-30 23:47:21,641 - database - INFO - Тестовые данные очищены в filial1
2025-10-30 23:47:21,647 - database - INFO - Тестовые данные очищены в filial2
2025-10-30 23:47:21,710 - database - INFO - Успешное подключение к filial1
2025-10-30 23:47:21,773 - database - INFO - Успешное подключение к filial2
2025-10-30 23:47:21,776 - test_synchronization - INFO - === ТЕСТ 3: Проверка отсутствия дублирования сотрудников ===
2025-10-30 23:47:21,790 - test_synchronization - INFO - Созданы одинаковые сотрудники в обоих филиалах с паспортом 77241030
2025-10-30 23:47:21,794 - database - INFO - Сотрудник с паспортом 77241030 уже существует в filial2 (филиал 2)
2025-10-30 23:47:21,799 - test_synchronization - INFO - Количество сотрудников после синхронизации: Ф1=1, Ф2=1
2025-10-30 23:47:21,801 - test_synchronization - INFO - ✅ УСПЕХ: ТЕСТ 3 ПРОЙДЕН: Дублирования сотрудников не произошло
2025-10-30 23:47:21,809 - database - INFO - Тестовые данные очищены в filial1
2025-10-30 23:47:21,817 - database - INFO - Тестовые данные очищены в filial2
2025-10-30 23:47:21,987 - database - INFO - Успешное подключение к filial1
2025-10-30 23:47:22,057 - database - INFO - Успешное подключение к filial2
2025-10-30 23:47:22,060 - test_synchronization - INFO - === ТЕСТ 4: Обнаружение конфликтной ситуации ===
2025-10-30 23:47:22,076 - test_synchronization - INFO - Созданы сотрудники с совпадающими ФИО и датой рождения, но разными паспортами
2025-10-30 23:47:22,086 - test_synchronization - INFO - Эмулировано обнаружение конфликта
2025-10-30 23:47:22,089 - test_synchronization - INFO - Конфликты до: Ф1=65, Ф2=0
2025-10-30 23:47:22,091 - test_synchronization - INFO - Конфликты после: Ф1=66, Ф2=0
2025-10-30 23:47:22,093 - test_synchronization - INFO - Найден конфликт: Конфликт паспортных данных: сотрудник Мария Сидорова и Мария Сидорова имеют одинаковый паспорт 2222222222
2025-10-30 23:47:22,096 - test_synchronization - INFO - ✅ УСПЕХ: ТЕСТ 4 ПРОЙДЕН: Конфликт обнаружен и зарегистрирован
2025-10-30 23:47:22,103 - database - INFO - Тестовые данные очищены в filial1
2025-10-30 23:47:22,109 - database - INFO - Тестовые данные очищены в filial2
2025-10-30 23:47:22,167 - database - INFO - Успешное подключение к filial1
2025-10-30 23:47:22,228 - database - INFO - Успешное подключение к filial2
2025-10-30 23:47:22,230 - test_synchronization - INFO - === ТЕСТ 5: Разрешение конфликта и синхронизация ===
2025-10-30 23:47:22,238 - test_synchronization - INFO - Создана тестовая запись о конфликте
2025-10-30 23:47:22,243 - test_synchronization - INFO - Эмулировано разрешение конфликта
2025-10-30 23:47:22,245 - test_synchronization - INFO - Разрешенные конфликты: 1
2025-10-30 23:47:22,255 - database - INFO - Сотрудник 77242050 синхронизирован из filial1 в filial2 с кодом 2011
2025-10-30 23:47:22,259 - test_synchronization - INFO - Синхронизация после разрешения конфликта: True
2025-10-30 23:47:22,261 - test_synchronization - INFO - Сотрудник в Ф2 после синхронизации: ДА
2025-10-30 23:47:22,262 - test_synchronization - INFO - ✅ УСПЕХ: ТЕСТ 5 ПРОЙДЕН: Конфликт разрешен и синхронизация выполнена
2025-10-30 23:47:22,268 - database - INFO - Тестовые данные очищены в filial1
2025-10-30 23:47:22,276 - database - INFO - Тестовые данные очищены в filial2
2025-10-30 23:47:22,454 - database - INFO - Успешное подключение к filial1
2025-10-30 23:47:22,517 - database - INFO - Успешное подключение к filial2
2025-10-30 23:47:22,519 - test_synchronization - INFO - === ТЕСТ 6: Сохранение истории изменений ===
2025-10-30 23:47:22,525 - test_synchronization - INFO - Создан сотрудник 13243 с начальной должностью 1
2025-10-30 23:47:22,531 - test_synchronization - INFO - Внесены изменения в должность и историю
2025-10-30 23:47:22,541 - database - INFO - Сотрудник 77242060 синхронизирован из filial1 в filial2 с кодом 2012
2025-10-30 23:47:22,546 - test_synchronization - INFO - Записей в истории: 2, текущая должность: 2
2025-10-30 23:47:22,548 - test_synchronization - INFO - ✅ УСПЕХ: ТЕСТ 6 ПРОЙДЕН: История изменений сохранена
2025-10-30 23:47:22,555 - database - INFO - Тестовые данные очищены в filial1
2025-10-30 23:47:22,561 - database - INFO - Тестовые данные очищены в filial2
2025-10-30 23:47:22,569 - __main__ - INFO - ВСЕ ТЕСТЫ УСПЕШНО ПРОЙДЕНЫ!
